<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>轮播图</title>
<meta name="viewport" content="width=device-width,initical-scale=1,user-scalable=no" />
<style>
*{ margin:0; padding:0; list-style:none; }
html{ font-size:20px; }
.box{ width:16rem; height:7rem; overflow:hidden; }
.box ul{ width:112rem; height:7rem; }
.box ul li{ width:16rem; height:7rem; float:left; text-align:center; line-height:7rem; }
</style>
<script>
;(function(){
	window.onload=window.onresize=function(){
		document.documentElement.style.fontSize = document.documentElement.clientWidth*20/320 +'px';	
	};	
})();
document.addEventListener('DOMContentLoaded',function(){
	var oUl = document.querySelector('ul');
	var aLi = document.querySelectorAll('li');
	var iNow = 1;
	var x = -iNow*aLi[1].offsetWidth;
	oUl.style.WebkitTransform = 'translate3d('+x+'px,0,0)';
	var changeSize = 50;
	var bOk = false;
	oUl.addEventListener('touchstart',function(ev){
		if(bOk)return;
		bOk = true;
		var downX = ev.targetTouches[0].pageX;
		var disX = downX -x;
		oUl.style.WebkitTransition = 'none';
		function fnMove(ev){
			x = ev.targetTouches[0].pageX-disX;
			oUl.style.WebkitTransform = 'translate3d('+x+'px,0,0)';
		}
		function fnEnd(ev){
			oUl.style.WebkitTransition = '.4s all ease';
			var upX = ev.changedTouches[0].pageX;
			var l = Math.abs(upX - downX);
			if(l>changeSize){
				if(upX<downX){
					iNow++;
					iNow==aLi.length&&(iNow=aLi.length-1);
				}else{
					iNow--;
					iNow<0&&(iNow=0);
				}
				x = -iNow*aLi[0].offsetWidth;
				oUl.style.WebkitTransform = 'translate3d('+-iNow*aLi[0].offsetWidth+'px,0,0)';				
			}else{				
				oUl.style.WebkitTransform = 'translate3d('+-iNow*aLi[0].offsetWidth+'px,0,0)';
			}			
			document.removeEventListener('touchmove',fnMove,false);
			document.removeEventListener('touchend',fnEnd,false);
			
			oUl.addEventListener('transitionend',function(){
				if(iNow==0){
					iNow=aLi.length-2;
				}else if(iNow==aLi.length-1){
					iNow=1;
				}
				x = -iNow*aLi[0].offsetWidth;
				oUl.style.WebkitTransition = 'none';
				oUl.style.WebkitTransform = 'translate3d('+x+'px,0,0)';
				bOk=false;	
			},false);							
		}
		document.addEventListener('touchmove',fnMove,false);
		document.addEventListener('touchend',fnEnd,false);
		ev.preventDefault();	
	},false);
},false);
</script>
</head>
<body>
<div class="box">
	<ul>
    	<li style="background:green; ">5</li>
    	<li style="background:#ccc; ">1</li>
        <li style="background:blue; ">2</li>
        <li style="background:yellow; ">3</li>
        <li style="background:#f90; ">4</li>
        <li style="background:green; ">5</li>
        <li style="background:#ccc; ">1</li>
    </ul>
</div>
</body>
</html>


















